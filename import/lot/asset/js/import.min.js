!function(e,t,n){function i(){let e,n=[{},0,0,0],i=t.querySelector("#import-form"),r=t.querySelector("#import-log"),a=t.createElement("li"),o=t.querySelector('.lot\\:tab a[data-name="log"]');if(!i)return;function s(){for(k in n[0])v=n[0][k],v.abort&&"function"==typeof v.abort&&v.abort()}function d(e,t){if(++n[1],"function"==typeof fetch){let i=new AbortController,r=i.signal;fetch(e,{headers:new Headers({"X-Requested-With":"XHR"}),method:"get",signal:r}).then(function(e){if(!e.ok)throw++n[3],p(),Error(e.statusText);return e.json()}).then(function(e){t(e),--n[1],++n[2],p()}).catch(function(e){++n[3];let i={log:{},next:!1};i.log["0 "+Date.now()/1e3]={status:408,description:e},t(i),p()}),n[0][e]=i}else{const i=new XMLHttpRequest;i.addEventListener("readystatechange",function(){4===i.readyState&&200===i.status&&(t(JSON.parse(i.responseText)),--n[1],++n[2],p())}),i.addEventListener("error",function(){++n[3];let e={log:{},next:!1};e.log["0 "+Date.now()/1e3]={status:408,description:"Network error."},t(e),p()}),i.open("GET",e,!0),i.setRequestHeader("X-Requested-With","XHR"),i.send(),n[0][e]=i}p()}function l(n){if(n.log){let i,a,o;for(i in n.log)a=n.log[i],(e=t.createElement("li")).className=a.status?"status:"+a.status:"",e.innerHTML="<p>"+c(1e3*+(i.split(" ")[1]||""))+" "+a.description+"</p>",a.parent&&(o=t.getElementById("log:"+a.parent))?o.children[1].appendChild(e):r&&r.appendChild(e),a.id&&(e.id="log:"+a.id,e.appendChild(t.createElement("ul"))),a.next&&"string"==typeof a.next&&d(a.next,l)}"string"==typeof n.next?d(n.next,l):p()}function c(e){let t=new Date(e),n="";return n+="[",n+=t.getHours().toString().padStart(2,"0")+":"+t.getMinutes().toString().padStart(2,"0")+":"+t.getSeconds().toString().padStart(2,"0"),n+="]"}function p(){a&&(a.className="status:"+(n[3]>0?"408":0===n[1]?"201":"102"),a.children[0].innerHTML="[Request: "+Object.keys(n[0]).length+"] [Loading: "+n[1]+"] [Loaded: "+n[2]+"] [Failed: "+n[3]+"]")}i.addEventListener("submit",function(i){this.setAttribute("disabled","disabled"),s(),n=[{},0,0,0],r&&(r.removeChild(a),r.innerHTML="",(e=t.createElement("li")).className="status:202",e.innerHTML="<p>"+c(Date.now())+" "+this.getAttribute("data-loading")+"</p>",r.appendChild(a),p(),a.appendChild(h),a.appendChild(u),r.appendChild(e)),o&&o.click();let f=new URLSearchParams(new FormData(this));d(this.action+"?"+f,l),i.preventDefault()}),a.id="import-log-status",a.innerHTML="<p></p>",r.appendChild(a),p();let u=t.createElement("a"),h=t.createTextNode(" ");u.innerHTML="Ã—",u.href="",u.addEventListener("click",function(e){h.parentNode.removeChild(h),u.parentNode.removeChild(u),s(),e.preventDefault()})}i(),n.on("change",i)}(0,this.document,this._);
