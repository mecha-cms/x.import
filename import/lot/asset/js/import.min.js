!function(e,t,n){function i(){let e,n=[{},0,0,0],i=t.forms.import,a=t.querySelector(".import-log"),o=t.createElement("li"),r=t.querySelector('.lot\\:tab a[data-name="log"]');if(!i)return;function l(){for(k in n[0])v=n[0][k],v.abort&&"function"==typeof v.abort&&v.abort()}function d(e,t){++n[1];let i=new AbortController,a=i.signal;fetch(e,{headers:new Headers({"X-Requested-With":"XHR"}),method:"get",signal:a}).then(function(e){if(!e.ok)throw++n[3],p(),Error(e.statusText);return e.json()}).then(function(e){t(e),--n[1],++n[2],p()}).catch(function(e){++n[3];let i={log:{},next:!1};i.log["0 "+Date.now()/1e3]={status:408,description:e},t(i),p()}),n[0][e]=i,p()}function s(n){if(n.log){let i,o,r;for(i in n.log)o=n.log[i],(e=t.createElement("li")).className=o.status?"status:"+o.status:"",e.innerHTML="<p>"+c(1e3*+(i.split(" ")[1]||""))+" "+o.description+"</p>",o.parent&&(r=t.getElementById("log:"+o.parent))?r.children[1].appendChild(e):a&&a.appendChild(e),o.id&&(e.id="log:"+o.id,e.appendChild(t.createElement("ul"))),o.next&&"string"==typeof o.next&&d(o.next,s)}"string"==typeof n.next?d(n.next,s):p()}function c(e){let t=new Date(e),n="";return n+="[",n+=t.getHours().toString().padStart(2,"0")+":"+t.getMinutes().toString().padStart(2,"0")+":"+t.getSeconds().toString().padStart(2,"0"),n+="]"}function p(){o&&(o.className="import-log-status status:"+(n[3]>0?"408":0===n[1]?"201":"102"),o.children[0].innerHTML="[Request: "+Object.keys(n[0]).length+"] [Loading: "+n[1]+"] [Loaded: "+n[2]+"] [Failed: "+n[3]+"]")}i.addEventListener("submit",function(i){this.setAttribute("disabled","disabled"),l(),n=[{},0,0,0],a&&(a.removeChild(o),a.innerHTML="",(e=t.createElement("li")).className="status:202",e.innerHTML="<p>"+c(Date.now())+" "+this.getAttribute("data-loading")+"</p>",a.appendChild(o),p(),o.appendChild(h),o.appendChild(u),a.appendChild(e)),r&&r.click();let g=new URLSearchParams(new FormData(this));d(this.action+"?"+g,s),i.preventDefault()}),o.className="import-log-status",o.innerHTML="<p></p>",a.appendChild(o),p();let u=t.createElement("a"),h=t.createTextNode(" ");u.innerHTML="Ã—",u.href="",u.addEventListener("click",function(e){h.parentNode.removeChild(h),u.parentNode.removeChild(u),l(),e.preventDefault()})}i(),n.on("change",i)}(window,document,_);
