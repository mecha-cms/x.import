!function(t,e,n){function i(){let t,n=[{},0,0,0],i=e.forms.import,a=e.querySelector(".import-log"),r=e.createElement("li"),o=e.querySelector('.lot\\:tab a[data-name="log"]');if(!i)return;function l(){for(k in n[0])v=n[0][k],v.abort&&"function"==typeof v.abort&&v.abort()}function s(t,e){++n[1];let i=new AbortController,a=i.signal;fetch(t,{headers:new Headers({"X-Requested-With":"XHR"}),method:"get",signal:a}).then(function(t){if(!t.ok)throw++n[3],p(),Error(t.statusText);return t.json()}).then(function(t){e(t),--n[1],++n[2],p()}).catch(function(t){++n[3];let i={log:{},next:!1};i.log["0 "+Date.now()/1e3]={status:408,description:t},e(i),p()}),n[0][t]=i,p()}function d(n){if(n.log){let i,r,o;for(i in n.log)r=n.log[i],(t=e.createElement("li")).className=r.status?"status:"+r.status:"",t.innerHTML="<p>"+c(1e3*+(i.split(" ")[1]||""))+" "+r.description+"</p>",r.parent&&(o=e.getElementById("log:"+r.parent))?o.children[1].appendChild(t):a&&a.appendChild(t),r.id&&(t.id="log:"+r.id,t.appendChild(e.createElement("ul"))),r.next&&"string"==typeof r.next&&s(r.next,d)}"string"==typeof n.next?s(n.next,d):p()}function c(t){let e=new Date(t),n="";return n+="[",n+=e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0")+":"+e.getSeconds().toString().padStart(2,"0"),n+="]"}function p(){r&&(r.className="import-log-status status:"+(n[3]>0?"408":0===n[1]?"201":"102"),r.children[0].innerHTML="[Request: "+Object.keys(n[0]).length+"] [Loading: "+n[1]+"] [Loaded: "+n[2]+"] [Failed: "+n[3]+"]")}i.addEventListener("submit",function(i){this.setAttribute("disabled","disabled"),l(),n=[{},0,0,0],a&&(a.removeChild(r),a.innerHTML="",(t=e.createElement("li")).className="status:202",t.innerHTML="<p>"+c(Date.now())+" "+this.getAttribute("data-loading")+"</p>",a.appendChild(r),p(),r.appendChild(h),r.appendChild(u),a.appendChild(t)),o&&o.click();let g=new URLSearchParams(new FormData(this));s(this.action+"?"+g,d),i.preventDefault()}),r.className="import-log-status",r.innerHTML="<p></p>",a.appendChild(r),p();let u=e.createElement("a"),h=e.createTextNode(" ");u.innerHTML="Ã—",u.href="",u.addEventListener("click",function(t){h.parentNode.removeChild(h),u.parentNode.removeChild(u),l(),t.preventDefault()})}i(),n.on("change",i)}(0,this.document,this._);
